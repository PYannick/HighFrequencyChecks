<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>GIS check surveys for site — isInterviewInTheCorrectSite • HighFrequencyChecks</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="GIS check surveys for site — isInterviewInTheCorrectSite" />
<meta property="og:description" content="This function check that all interviews in the dataset were made in the correct site.
It is based on a GIS shapefile providing the boundaries of each site with their names.
The function is based on the GPS data filled in the survey to determine their location.
There is an option to automatically correct the site in the surveys whith the correct location." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">HighFrequencyChecks</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/HFC.html">High Frequency Checks, a template for data quality monitoring</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>GIS check surveys for site</h1>
    
    <div class="hidden name"><code>isInterviewInTheCorrectSite.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function check that all interviews in the dataset were made in the correct site.
It is based on a GIS shapefile providing the boundaries of each site with their names.
The function is based on the GPS data filled in the survey to determine their location.
There is an option to automatically correct the site in the surveys whith the correct location.</p>
    </div>

    <pre class="usage"><span class='fu'>isInterviewInTheCorrectSite</span><span class='op'>(</span>
  ds <span class='op'>=</span> <span class='cn'>NULL</span>,
  dsSite <span class='op'>=</span> <span class='cn'>NULL</span>,
  dsCoordinates <span class='op'>=</span> <span class='cn'>NULL</span>,
  adminBoundaries <span class='op'>=</span> <span class='cn'>NULL</span>,
  adminBoundariesSite <span class='op'>=</span> <span class='cn'>NULL</span>,
  surveyConsent <span class='op'>=</span> <span class='cn'>NULL</span>,
  reportingColumns <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>enumeratorID</span>, <span class='va'>uniqueID</span><span class='op'>)</span>,
  correctIsInterviewInTheCorrectSite <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>ds</th>
      <td><p>dataset containing the survey (from kobo): data.frame</p></td>
    </tr>
    <tr>
      <th>dsSite</th>
      <td><p>name of the field in the dataset where the site is stored: string</p></td>
    </tr>
    <tr>
      <th>dsCoordinates</th>
      <td><p>name of the fields from the dataset where the information about the GPS coordinates are stored: list of string (c('Long','Lat'))</p></td>
    </tr>
    <tr>
      <th>adminBoundaries</th>
      <td><p>dataset containing the shapefile of the site boundaries - Regardless the projection used for the shapefile, it is transformed to WGS84</p></td>
    </tr>
    <tr>
      <th>adminBoundariesSite</th>
      <td><p>name of the field in the shapefile where the site is stored: string</p></td>
    </tr>
    <tr>
      <th>surveyConsent</th>
      <td><p>name of the field in the dataset where the survey consent is stored: string</p></td>
    </tr>
    <tr>
      <th>reportingColumns</th>
      <td><p>(Optional, by default it is built from the enumeratorID and the UniqueID) name of the columns from the dataset you want in the result: list of string (c('col1','col2',...))</p></td>
    </tr>
    <tr>
      <th>correctIsInterviewInTheCorrectSite</th>
      <td><p>(Optional, by default set as FALSE) if TRUE, the site in the survey which is wrong will be replaced by the real one: boolean (TRUE/FALSE)</p></td>
    </tr>
    <tr>
      <th>uniqueID</th>
      <td><p>name of the field where the survey unique ID is stored: string</p></td>
    </tr>
    <tr>
      <th>enumeratorID</th>
      <td><p>name of the field where the enumerator ID is stored: string</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>dst      same dataset as the inputed one but with survey marked for deletion if errors are found and delete=TRUE (or NULL)</p>
<p>ret_log  list of the errors found (or NULL)</p>
<p>var      a list of value (or NULL)</p>
<p>graph    graphical representation of the results (or NULL)</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Yannick Pascaud</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='op'>{</span>
  <span class='va'>ds</span> <span class='op'>&lt;-</span> <span class='fu'>HighFrequencyChecks</span><span class='fu'>::</span><span class='va'><a href='sample_dataset.html'>sample_dataset</a></span>
  <span class='va'>dsSite</span> <span class='op'>&lt;-</span> <span class='st'>"union_name"</span>
  <span class='va'>dsCoordinates</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"X_gps_reading_longitude"</span>,<span class='st'>"X_gps_reading_latitude"</span><span class='op'>)</span>
  <span class='va'>adminBoundaries</span> <span class='op'>&lt;-</span> <span class='fu'>HighFrequencyChecks</span><span class='fu'>::</span><span class='va'><a href='admin.html'>admin</a></span>
  <span class='va'>adminBoundariesSite</span> <span class='op'>&lt;-</span> <span class='st'>"Union"</span>
  <span class='va'>surveyConsent</span> <span class='op'>&lt;-</span> <span class='st'>"survey_consent"</span>
  <span class='va'>uniqueID</span> <span class='op'>&lt;-</span> <span class='st'>"X_uuid"</span>
  <span class='va'>enumeratorID</span> <span class='op'>&lt;-</span> <span class='st'>"enumerator_id"</span>
  <span class='va'>reportingColumns</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>enumeratorID</span>, <span class='va'>uniqueID</span><span class='op'>)</span>

  <span class='va'>list</span><span class='op'>[</span><span class='va'>dst</span>,<span class='va'>ret_log</span>,<span class='va'>var</span>,<span class='va'>graph</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'>isInterviewInTheCorrectSite</span><span class='op'>(</span>ds<span class='op'>=</span><span class='va'>ds</span>,
                                                     dsSite<span class='op'>=</span><span class='va'>dsSite</span>,
                                                     dsCoordinates<span class='op'>=</span><span class='va'>dsCoordinates</span>,
                                                     adminBoundaries<span class='op'>=</span><span class='va'>adminBoundaries</span>,
                                                     adminBoundariesSite<span class='op'>=</span><span class='va'>adminBoundariesSite</span>,
                                                     surveyConsent<span class='op'>=</span><span class='va'>surveyConsent</span>,
                                                     reportingColumns<span class='op'>=</span><span class='va'>reportingColumns</span>,
                                                     correctIsInterviewInTheCorrectSite<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>ret_log</span>, <span class='fl'>10</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: CRS object has no comment</span></div><div class='output co'>#&gt;    enumerator_id                               X_uuid     SiteRec    SiteReal
#&gt; 1             52 4e05b9ee-2fb6-4276-ab73-7675e94f5011 baharchhara Baharchhara
#&gt; 2          10052 3c34b46b-96c4-46aa-9d4f-4147527f9042 baharchhara Baharchhara
#&gt; 3          10049 b404f0fa-d5ef-4fdf-a217-07509244c1f1 baharchhara Baharchhara
#&gt; 4          10046 b1634db9-9108-486d-a8f1-5706290b5f7d baharchhara Baharchhara
#&gt; 5             18 3e5ede43-369c-40f6-b59b-c73a5525a81d baharchhara Baharchhara
#&gt; 6             83 225f1521-c75d-4a4e-b394-0f02ac8e9d8a baharchhara Baharchhara
#&gt; 7             54 06b1df42-600d-4b51-90c0-1ec06b9c2d13 baharchhara Baharchhara
#&gt; 8          30022 89af7eaf-efa4-4f05-89eb-cae03133258a baharchhara Baharchhara
#&gt; 9             43 a98f85bc-0752-437d-a513-cc729804c303 baharchhara Baharchhara
#&gt; 10         10046 5222a1b0-75a8-4b99-9ce2-138128f88b73 baharchhara Baharchhara</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Yannick Pascaud.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


